<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Inventario ArÃ©valo</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; background: #f9f9f9; }
    h1 { color: #2c3e50; text-align: center; }
    table { width: 90%; border-collapse: collapse; margin: 20px auto; box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
    th, td { border: 1px solid #ddd; padding: 10px; text-align: center; }
    th { background-color: #34495e; color: white; }
    tr:nth-child(even) { background-color: #f2f2f2; }
    tr:hover { background-color: #eaf2f8; }
    button { margin: 2px; padding: 6px 12px; cursor: pointer; border-radius: 4px; border: none; font-weight: bold; }
    .delete-btn { background-color: #e74c3c; color: white; }
    .stock-btn { background-color: #3498db; color: white; }
    .add-btn { background-color: #2ecc71; color: white; }
    form { margin: 20px auto; text-align: center; }
    input { margin: 5px; padding: 8px; border: 1px solid #ccc; border-radius: 4px; }
  </style>
</head>
<body>
  <h1>Inventario ArÃ©valo</h1>

  <form id="formProducto">
    <input type="text" id="idProducto" placeholder="ID" required>
    <input type="text" id="nombreProducto" placeholder="Nombre del Producto" required>
    <input type="number" id="precioProducto" placeholder="Precio Unitario" required>
    <input type="number" id="stockProducto" placeholder="Cantidad en Stock" required>
    <button type="submit" class="add-btn">Agregar Producto</button>
  </form>

  <table id="inventario">
    <thead>
      <tr>
        <th>ID</th>
        <th>Nombre del Producto</th>
        <th>Precio Unitario</th>
        <th>Cantidad en Stock</th>
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js"></script>

  <script>
    // ðŸ” ConfiguraciÃ³n de Firebase (reemplaza con tu propia config)
    const firebaseConfig = {
      apiKey: "TU_API_KEY",
      authDomain: "TU_PROJECT_ID.firebaseapp.com",
      projectId: "TU_PROJECT_ID",
      storageBucket: "TU_PROJECT_ID.appspot.com",
      messagingSenderId: "TU_SENDER_ID",
      appId: "TU_APP_ID"
    };

    // Inicializar Firebase
    const app = firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    // Mostrar inventario desde Firestore
    async function renderInventario() {
      const tabla = document.getElementById("inventario").querySelector("tbody");
      tabla.innerHTML = "";
      const snapshot = await db.collection("productos").get();
      snapshot.forEach((doc) => {
        const producto = doc.data();
        const fila = tabla.insertRow();
        fila.innerHTML = `
          <td>${producto.id}</td>
          <td>${producto.nombre}</td>
          <td>$${producto.precio}</td>
          <td class="stock">${producto.stock}</td>
          <td>
            <button class="stock-btn" onclick="restarStock('${doc.id}', ${producto.stock})">Restar Stock</button>
            <button class="delete-btn" onclick="eliminarFila('${doc.id}', '${producto.nombre}')">Eliminar Fila</button>
          </td>
        `;
      });
    }

    // Restar stock
    async function restarStock(docId, stockActual) {
      if (stockActual > 0) {
        await db.collection("productos").doc(docId).update({ stock: stockActual - 1 });
        renderInventario();
      } else {
        alert("No queda stock disponible.");
      }
    }

    // Eliminar producto
    async function eliminarFila(docId, nombre) {
      if (confirm("Â¿Seguro que deseas eliminar el producto '" + nombre + "'?")) {
        await db.collection("productos").doc(docId).delete();
        renderInventario();
      }
    }

    // Agregar producto
    document.getElementById("formProducto").addEventListener("submit", async function(event) {
      event.preventDefault();
      const id = document.getElementById("idProducto").value;
      const nombre = document.getElementById("nombreProducto").value;
      const precio = document.getElementById("precioProducto").value;
      const stock = parseInt(document.getElementById("stockProducto").value);

      await db.collection("productos").add({ id, nombre, precio, stock });
      renderInventario();
      document.getElementById("formProducto").reset();
    });

    // Cargar inventario al iniciar
    renderInventario();
  </script>
</body>
</html>